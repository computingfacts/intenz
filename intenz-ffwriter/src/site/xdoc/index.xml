<?xml version="1.0" encoding="UTF-8"?>

<document>
	<properties>
		<title>Flat file writer</title>
		<author email="rafalcan@ebi.ac.uk">Rafael Alc√°ntara</author>
	</properties>
	<body>
		<section name="IntEnz flat file writer module">
            The IntEnz flat file writer module dumps enzyme data in SIB's
            <code>enzyme.dat</code> format.
            <br/>
            The dump is done every night. The resulting file is downloaded by
            SIB, and at some point they release a new version of the flat file
            in both SIB's and EBI's ftp servers.
		</section>
		
		<subsection name="DE line modifications">
			EC numbers which have been transferred to more than one target EC
            number or whose target has been transferred later on, pose a
            problem as the DE line of the flat file is generated by default
            using the information in the HISTORY_EVENTS table, that is only
            one target, and only the next (not the final one).
            <br/>
			Other EC numbers are deleted by NC-IUBMB, but SIB prefers to
            consider them as transferred to existing EC numbers. Their DE line
            should read "Transferred to..." instead of "Deleted entry".
			<br/>
			So we need to translate these DE lines. To that end, we use the file
			<code>resources/DE_line_modifications.properties</code>, which lists
			the EC numbers whose DE line should be changed because of the above
            reasons, mapped to the new (modified) DE line.
            <br/>
            Once a line is added/modified in the file, in order to make it
            effective you have to deploy a new version of this module to the
            maven repository, as the overnight cron job takes automatically the
            latest release (final version, not SNAPSHOT).
		</subsection>

        <subsection name="Other formatting exceptions">
        Other exceptions must be done to get the right format. For example,
        the characters 'sp.' don't mean the end of a sentence. This concrete
        case is defined in CC_LineFormatter.java, in the <a
        href="xref/uk/ac/ebi/intenz/tools/sib/writer/CC_LineFormatter.html#144">
        <code>nonSentenceDelimiters</code></a> variable.
        <br/>
        For other cases, like capitalisation exceptions at the beginning of a
        sentence, it may be necessary to make changes to the
        <a href="../intenz-translator">intenz-translator</a> module.
        </subsection>
	</body>
</document>
