<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF8" />
<script src="../dbdoc.js" type="text/javascript"></script>
<link href="../dbdoc.css" type="text/css" rel="stylesheet">
</head>
<body class="object">
<div id="header"><h2>P_INSERT_REACTION</h2>
<div class="tabs clearfix">

<div class="tab"><div><a href="P_INSERT_REACTION.html">Doc</a></div></div>
<div class="tab"><div><a href="P_INSERT_REACTION_Details.html">Details</a></div></div>
<div class="tab"><div><a href="P_INSERT_REACTION_Grants.html">Grants</a></div></div>
<div class="tab"><div><a href="P_INSERT_REACTION_References.html">References</a></div></div>
<div class="tab"><div><a href="P_INSERT_REACTION_Dependencies.html">Dependencies</a></div></div>
<div class="tab" id="current"><div><a href="P_INSERT_REACTION_Code.html">Code</a></div></div>
</div></div><br/>
<div class="tab-panes">
<div id="Code"> <table cellpadding="0" cellspacing="0" cellspacing="0" summary=""><tr>
	<th>TEXT</th>
</tr>
	<tr><td><pre>
PROCEDURE p_insert_reaction
  (
    new_id               IN OUT intenz_reactions.reaction_id%type,
    new_accession        IN intenz_reactions.intenz_accession%type,
    new_equation         IN intenz_reactions.equation%type,
    new_fp               IN intenz_reactions.fingerprint%type,
    new_status           IN intenz_reactions.status%type,
    new_source           IN intenz_reactions.source%type,
    new_qualifiers       IN intenz_reactions.qualifiers%type,
    new_data_comment     IN intenz_reactions.data_comment%type,
    new_reaction_comment IN intenz_reactions.reaction_comment%type,
    new_direction        IN intenz_reactions.direction%type,
    new_un_reaction      in intenz_reactions.un_reaction%type,
    new_iubmb            IN intenz_reactions.iubmb%type)
AS
  existing_id intenz_reactions.reaction_id%type;
BEGIN
   SELECT reaction_id
     INTO existing_id
     FROM intenz_reactions
    WHERE equation = new_equation
  AND fingerprint  = new_fp;
  IF existing_id  IS NOT NULL THEN
    new_id        := -existing_id;
  END IF;
EXCEPTION
WHEN NO_DATA_FOUND THEN
  IF new_id IS NULL THEN
     SELECT s_reaction_id.nextval INTO new_id FROM DUAL;
  END IF;
   INSERT
     INTO intenz_reactions
    (
      reaction_id     ,
      intenz_accession,
      equation        ,
      fingerprint     ,
      status          ,
      source          ,
      qualifiers      ,
      data_comment    ,
      reaction_comment,
      direction       ,
      un_reaction,
      iubmb
    )
    VALUES
    (
      new_id              ,
      new_accession       ,
      new_equation        ,
      new_fp              ,
      new_status          ,
      new_source          ,
      new_qualifiers      ,
      new_data_comment    ,
      new_reaction_comment,
      new_direction       ,
      new_un_reaction,
      new_iubmb
    );
END;</pre>	</td></tr>
</table></div></body></html>
